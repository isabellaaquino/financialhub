{"ast":null,"code":"var _jsxFileName = \"D:\\\\Workspace\\\\financialhub\\\\frontend\\\\src\\\\context\\\\AuthContext.tsx\",\n  _s = $RefreshSig$();\nimport { createContext, useState } from \"react\";\nimport authService from \"../api/services/AuthService\";\nimport jwt_decode from \"jwt-decode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext({});\nexport const AuthProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  localStorage.getItem(\"authTokens\");\n  let [authTokens, setAuthTokens] = useState(null);\n  let [loggedUser, setLoggedUser] = useState(null);\n  async function SignIn(email, password) {\n    const response = await authService.signIn(email, password);\n    setAuthTokens(response);\n    setLoggedUser(jwt_decode(response.access));\n    localStorage.setItem(\"authTokens\", JSON.stringify(response));\n  }\n  async function SignOut() {\n    setLoggedUser(null);\n  }\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user: loggedUser,\n      setLoggedUser,\n      isAuthenticated: Boolean(loggedUser),\n      SignIn,\n      SignOut\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"8LNmJJKC8ZdB+59A1ou7hpCTA+A=\");\n_c = AuthProvider;\nexport default AuthContext;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useState","authService","jwt_decode","AuthContext","AuthProvider","children","localStorage","getItem","authTokens","setAuthTokens","loggedUser","setLoggedUser","SignIn","email","password","response","signIn","access","setItem","JSON","stringify","SignOut","user","isAuthenticated","Boolean"],"sources":["D:/Workspace/financialhub/frontend/src/context/AuthContext.tsx"],"sourcesContent":["import { createContext, useState } from \"react\";\r\nimport { api } from \"../api/services/Api\";\r\nimport authService from \"../api/services/AuthService\";\r\nimport { User } from \"../models/User\";\r\n\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { useNavigate } from \"react-router-dom\";\r\ninterface AuthContextData {\r\n  user: User | null;\r\n  setLoggedUser: any;\r\n  SignIn(email: string, password: string): void;\r\n  SignOut(): void;\r\n  isAuthenticated: boolean;\r\n}\r\n\r\ninterface Props {\r\n  children: React.ReactNode;\r\n}\r\n\r\ninterface AuthTokens {\r\n  access: string;\r\n  refresh: string;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextData>({} as AuthContextData);\r\nexport const AuthProvider = ({ children }: Props) => {\r\n  localStorage.getItem(\"authTokens\");\r\n  let [authTokens, setAuthTokens] = useState<AuthTokens | null>(null);\r\n  let [loggedUser, setLoggedUser] = useState<User | null>(null);\r\n\r\n  async function SignIn(email: string, password: string) {\r\n    const response = (await authService.signIn(email, password)) as AuthTokens;\r\n    setAuthTokens(response);\r\n    setLoggedUser(jwt_decode(response.access));\r\n    localStorage.setItem(\"authTokens\", JSON.stringify(response));\r\n  }\r\n\r\n  async function SignOut() {\r\n    setLoggedUser(null);\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user: loggedUser,\r\n        setLoggedUser,\r\n        isAuthenticated: Boolean(loggedUser),\r\n        SignIn,\r\n        SignOut,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\nexport default AuthContext;\r\n"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,QAAQ,QAAQ,OAAO;AAE/C,OAAOC,WAAW,MAAM,6BAA6B;AAGrD,OAAOC,UAAU,MAAM,YAAY;AAAC;AAmBpC,MAAMC,WAAW,gBAAGJ,aAAa,CAAkB,CAAC,CAAC,CAAoB;AACzE,OAAO,MAAMK,YAAY,GAAG,QAAyB;EAAA;EAAA,IAAxB;IAAEC;EAAgB,CAAC;EAC9CC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;EAClC,IAAI,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGT,QAAQ,CAAoB,IAAI,CAAC;EACnE,IAAI,CAACU,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAc,IAAI,CAAC;EAE7D,eAAeY,MAAM,CAACC,KAAa,EAAEC,QAAgB,EAAE;IACrD,MAAMC,QAAQ,GAAI,MAAMd,WAAW,CAACe,MAAM,CAACH,KAAK,EAAEC,QAAQ,CAAgB;IAC1EL,aAAa,CAACM,QAAQ,CAAC;IACvBJ,aAAa,CAACT,UAAU,CAACa,QAAQ,CAACE,MAAM,CAAC,CAAC;IAC1CX,YAAY,CAACY,OAAO,CAAC,YAAY,EAAEC,IAAI,CAACC,SAAS,CAACL,QAAQ,CAAC,CAAC;EAC9D;EAEA,eAAeM,OAAO,GAAG;IACvBV,aAAa,CAAC,IAAI,CAAC;EACrB;EAEA,oBACE,QAAC,WAAW,CAAC,QAAQ;IACnB,KAAK,EAAE;MACLW,IAAI,EAAEZ,UAAU;MAChBC,aAAa;MACbY,eAAe,EAAEC,OAAO,CAACd,UAAU,CAAC;MACpCE,MAAM;MACNS;IACF,CAAE;IAAA,UAEDhB;EAAQ;IAAA;IAAA;IAAA;EAAA,QACY;AAE3B,CAAC;AAAC,GA7BWD,YAAY;AAAA,KAAZA,YAAY;AA8BzB,eAAeD,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}